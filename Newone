@Service
public class EmailValidationService {

    @Autowired
    private DomainRepository domainRepository;

    public boolean isEmailValid(String email) {
        String emailDomain = email.split("@")[1];
        List<String> domains = domainRepository.findAllDomains();

        for (String domain : domains) {
            if (matchDomainPattern(emailDomain, domain)) {
                return true;
            }
        }
        return false;
    }

    private boolean matchDomainPattern(String emailDomain, String domainPattern) {
        String regexPattern = domainPattern.replace("*", ".*");
        return emailDomain.matches(regexPattern);
    }
}


vvvvb


@RestController
@RequestMapping("/api")
public class EmailController {

    @Autowired
    private EmailValidationService emailValidationService;

    @PostMapping("/validate-email")
    public ResponseEntity<EmailValidationResponse> validateEmail(@RequestBody EmailRequest emailRequest) {
        boolean isValid = emailValidationService.isEmailValid(emailRequest.getEmail());
        return ResponseEntity.ok(new EmailValidationResponse(isValid));
    }
}
