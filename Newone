package com.example.demo.service;

import org.springframework.stereotype.Service;

import java.util.regex.Pattern;

@Service
public class EmailValidationService {

    // Regular expression for validating email format
    private static final String EMAIL_REGEX = "^[A-Za-z0-9+_.-]+@(.+)$";
    private static final Pattern EMAIL_PATTERN = Pattern.compile(EMAIL_REGEX);

    // Valid domain for simplicity, stored as a String. You could use a Set for multiple domains.
    private static final String VALID_DOMAIN = "example.com";

    public boolean isEmailValid(String email) {
        if (email == null || email.isEmpty()) {
            return false;
        }

        // Check if the email matches the regex pattern
        if (!EMAIL_PATTERN.matcher(email).matches()) {
            return false;
        }

        // Extract domain and check if it matches the valid domain
        String domain = email.substring(email.indexOf('@') + 1);
        return VALID_DOMAIN.equals(domain);
    }
}
