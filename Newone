import org.springframework.http.*;
import org.springframework.web.client.RestTemplate;
import java.util.Map;

public class TokenService {

    public String getAccessToken() {
        String url = "https://example.com/oauth/token"; // Replace with your API URL
        RestTemplate restTemplate = new RestTemplate();

        // Request body with the necessary parameters
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);
        headers.setBasicAuth("client_id", "client_secret"); // Replace with your credentials
        
        String requestBody = "{\"username\":\"your-username\",\"password\":\"your-password\",\"grant_type\":\"password\"}";

        // Create the request entity
        HttpEntity<String> requestEntity = new HttpEntity<>(requestBody, headers);

        // Send POST request
        ResponseEntity<Map> response = restTemplate.exchange(url, HttpMethod.POST, requestEntity, Map.class);

        // Extract the access_token from the response body
        Map<String, Object> responseBody = response.getBody();
        if (responseBody != null && responseBody.containsKey("access_token")) {
            return responseBody.get("access_token").toString();
        }

        return null;
    }
}
